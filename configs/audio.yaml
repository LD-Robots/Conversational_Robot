sample_rate: 16000
block_ms: 20

# VAD agresiv pentru sesiuni (3 = cel mai strict)
vad_aggressiveness: 3
silence_ms_to_end: 1500
max_record_seconds: 6
session_idle_seconds: 12
min_valid_seconds: 1.1

# ——— BARGE-IN INTELIGENT (filtrează eco + zgomot, păstrează doar vocea reală) ———
barge_enabled: true
barge_allow_during_tts: false        # dezactivat: TTS se oprește doar pe comanda „stop” (FastExit/Picovoice)
barge_voice_hold_ms: 320
barge_debug_meter: true #false
barge_debug_interval_ms: 120
barge_voice_drop_ms: 10

barge_min_voice_ms: 550           # cere ~0.5s voce continuă; crește dacă încă prinde eco
barge_min_rms_dbfs: -20              # nivel minim al vocii; difuzoarele rămân de obicei sub -25 dB

barge_highpass_hz: 180               # taie huruit/bas înainte de analiză, păstrează voc
# ZCR = zero-cross rate (ajută să eliminăm zgomote impulsive)
barge_zcr_min: 0.07
barge_zcr_max: 0.28

barge_debounce_ms: 200              # ignoră declanșări repetate în fereastra asta
barge_cooldown_ms: 1000             # cât timp rămâne „latent” după un barge-in valid
barge_arm_after_ms: 1100            # așteaptă atât după startul TTS înainte să re-armă
barge_leak_margin_db: 10.0          # prag = nivel_echo + 10 dB; crește dacă boxele sunt foarte tari
barge_leak_decay_ms: 1800           # cât timp păstrează nivelul eco-ului recent măsurat
barge_require_cobra: true           # cere confirmare Cobra pentru barge-in (anti-eco)
barge_cobra_relax_db: 0.0           # relaxează pragul RMS doar dacă Cobra confirmă voce

cobra:
  enabled: true
  threshold: 0.65                 # 1.0 = foarte strict; scade doar dacă îți taie voce reală

  hold_ms: 240
  access_key: "${PICOVOICE_ACCESS_KEY}"

# ——— Audio device & AEC ———
prefer_echo_cancel: true
input_device_hint: "pipewire"        # selectează device-ul PipeWire (default ec_mic)

# AEC mode: system (preferat) | webrtc | off
aec_mode: system                     # PulseAudio module-echo-cancel e deja activ
monitor_device_hint: ""

# Filtre simple din cod (AGC dezactivat pentru a păstra dinamica naturală)
ns: true
agc: false
hpf: true
